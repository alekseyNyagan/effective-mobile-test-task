# Банковский REST-сервис

Это RESTful-сервис для управления банковскими картами и счетами пользователей, созданный на Spring Boot.

## Функционал

- Аутентификация пользователей с помощью JWT
- CRUD-операции для пользователей и банковских карт
- Защищенные эндпоинты с контролем доступа на основе ролей (USER, ADMIN)
- Переводы средств между картами одного пользователя
- Процесс блокировки и одобрения блокировки карт
- Документация OpenAPI (Swagger)

## Используемые технологии

- **Java 25**
- **Spring Boot 3**
- **Spring Security**
- **Spring Data JPA**
- **PostgreSQL**
- **Maven**
- **Liquibase** для миграций базы данных
- **MapStruct** для маппинга объектов
- **Lombok** для сокращения шаблонного кода
- **JUnit 5 & Mockito** для тестирования
- **Docker & Docker Compose** для контейнеризации

---

## Как запустить с помощью Docker Compose (Рекомендуется)

Это самый простой способ запустить приложение и его базу данных.

### Требования

- **Docker**
- **Docker Compose**

### Шаги

1.  **Клонируйте репозиторий:**
    ```bash
    git clone <your-repository-url>
    cd bank_rest-main
    ```

2.  **Запустите приложение с помощью Docker Compose:**
    Эта команда соберет образ Spring Boot приложения, запустит контейнер с PostgreSQL и запустит само приложение.
    ```bash
    docker-compose up --build
    ```
    Флаг `--build` гарантирует, что будут включены последние изменения в коде. Приложение запустится, и Liquibase автоматически применит необходимые изменения схемы базы данных.

3.  **Доступ к приложению:**
    - **API**: Сервис будет доступен по адресу `http://localhost:8080`
    - **Swagger UI**: Интерактивная документация API доступна по адресу `http://localhost:8080/swagger-ui.html`

4.  **Остановка приложения:**
    Чтобы остановить приложение и контейнер с базой данных, нажмите `Ctrl+C` в терминале, где запущен `docker-compose`, а затем выполните:
    ```bash
    docker-compose down
    ```

---

## Ручная локальная настройка (Альтернатива)

Если вы предпочитаете запускать приложение без Docker, вы можете выполнить следующие шаги.

### Требования

- **JDK 25** или новее
- **Apache Maven**
- Запущенная база данных **PostgreSQL**

### 1. Настройка базы данных

Создайте базу данных и пользователя в вашем локальном экземпляре PostgreSQL. Учетные данные по умолчанию, ожидаемые приложением:
- **База данных**: `bank_cards_db`
- **Имя пользователя**: `postgres`
- **Пароль**: `postgres`

### 2. Сборка и запуск

1.  **Соберите проект с помощью Maven:**
    ```bash
    mvn clean install
    ```

2.  **Запустите приложение:**
    (Убедитесь, что вы установили необходимые переменные окружения, если ваши учетные данные для базы данных отличаются от стандартных).
    ```bash
    java -jar target/bankcards-0.0.1-SNAPSHOT.jar
    ```
